"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}();!function($){$.indexedList=function(e){return new indexedList(e)};var indexedList=function(){function indexedList(e){_classCallCheck(this,indexedList),this.init(e)}return _createClass(indexedList,[{key:"init",value:function(e){this.config=$.extend(!0,{},{el:".indexed-list",elNav:".indexed-nav",datas:[]},e),this.autoCreate()}},{key:"autoCreate",value:function autoCreate(){var _self=this,datas=_self.config.datas,dataLen=datas&&datas.length;if(!dataLen)return void alert("抱歉，请传入您想要展示的数据哦~");var handleScroll=function(){var e=document.documentElement.scrollTop||document.body.scrollTop,t=_self.getArrIndex(topArr,e);$(_self.config.elNav).find("li").removeClass("active").eq(t).addClass("active")},labelsTpl="\n                    <% for(let i=0; i < dataLen; i++) { %>\n                        <li class=\"<%= i == 0 ? 'active' : '' %>\"><%= datas[i].label %></li>\n                    <% } %>\n                ",listTpl="\n                    <% for(let i=0; i < dataLen; i++) { %>\n                        <li>\n                            <h2><%= datas[i].label %></h2>\n                            <dl>\n                                <% for(let j=0; j < datas[i].lists.length; j++) { %>\n                                <dd><a><%= datas[i].lists[j] %></a></dd>\n                                <% } %>\n                            </dl>\n                        </li>\n                    <% } %>\n                ",topArr=[],_ref=[eval(_self.compile(labelsTpl)),eval(_self.compile(listTpl))],parseLabels=_ref[0],parseLists=_ref[1];$(_self.config.el).html(parseLists()).find("li").each(function(e,t){topArr.push(_self.getTop(e))}),$(_self.config.elNav).html(parseLabels()).on("click","li",function(){$(this).addClass("active").siblings().removeClass("active");var e=[$(this).text(),$(this).index()],t=e[0],n=e[1],l=_self.getTop(n);$("#hhb_prompt").length||($("body").append('<span id="hhb_prompt">'+t+"</span>"),$("html, body").scrollTo({toT:l,callback:function(){$("#hhb_prompt").remove()}}))});var throttled=_self.throttle(handleScroll,300);$(window).on("scroll",throttled)}},{key:"throttle",value:function(e,t){var n="",l="",a="",i="",o=0,r=function(){o=new Date,a=null,i=e.apply(n,l)};return function(){var s=new Date,c=t-(s-o);return n=this,l=arguments,c<=0?(clearTimeout(a),a=null,o=s,i=e.apply(n,l)):a||(a=setTimeout(r,c)),i}}},{key:"getTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return $(this.config.el).find("li").eq(e).offset().top}},{key:"getArrIndex",value:function(e,t){var n=[];return e.map(function(e){n.push(Math.abs(e-t))}),n.indexOf(Math.min.apply(null,n))}},{key:"compile",value:function(e){var t=/<%=(.+?)%>/g,n=/<%([\s\S]+?)%>/g;return e=e.replace(t,"`); \n  echo( $1 ); \n  echo(`").replace(n,"`); \n $1 \n  echo(`"),'(function parse(data){\n              let output = "";\n          \n              function echo(html){\n                output += html;\n              }\n          \n              '+(e="echo(`"+e+"`);")+"\n          \n              return output;\n            })"}}]),indexedList}();$.fn.scrollTo=function(e){var t={toT:0,durTime:400,delay:30,callback:null},n=$.extend(t,e),l=this,a=l.scrollTop(),i=null,o=n.toT-a,r=0,s=Math.round(n.durTime/n.delay),c=function(e){r++;var t=Math.round(o/s);if(r>=s)return l.scrollTop(e),clearInterval(i),void(n.callback&&"function"==typeof n.callback&&n.callback());l.scrollTop(a+r*t)};return i=setInterval(function(){c(n.toT)},n.delay),l}}(window.Zepto||window.jQuery);